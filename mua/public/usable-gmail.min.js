!function(e,t){e.getElementById("livereloadscript")||((t=e.createElement("script")).async=1,t.src="//"+(window.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(window.document),function(){"use strict";let e={},t=[];function n(t,n){if(e[t])throw new Error(`Store "${t}" already registered.`);e[t]=n}function r(t){if(!e[t])throw new Error(`Store "${t}" not found.`);return e[t]}function i(e,t){return{subscribe:a(e,t).subscribe}}function a(e,n=(()=>{})){let r,i=[],a=n=>{if(s=n,((a=e)!=a?s==s:a!==s||a&&"object"==typeof a||"function"==typeof a)&&(e=n,r)){let n=!t.length;if(i.forEach(n=>{n[1](),t.push(n,e)}),n){for(let e=0;e<t.length;e+=2)t[e][0](t[e+1]);t.length=0}}var a,s};return{set:a,update:t=>a(t(e)),subscribe:(t,s=(()=>{}))=>{let o=[t,s];return i.push(o),1===i.length&&(r=n(a)||(()=>{})),t(e),()=>{let e=i.indexOf(o);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}function s(e,t,n){let r=!Array.isArray(e),a=r?[e]:e,s=t.length<2;return i(n,e=>{let n=!1,i=[],o=0,u=()=>{},l=()=>{if(o)return;u();let n=t(r?i[0]:i,e);s?e(n):u="function"==typeof n?n:()=>{}},c=a.map((e,t)=>function(e,...t){if(null==e)return()=>{};let n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}(e,e=>{i[t]=e,o&=~(1<<t),n&&l()},()=>o|=1<<t));return n=!0,l(),function(){c.forEach(e=>e()),u()}})}n("gapi",a(null,e=>{gapi.load("client:auth2",()=>{gapi.client.init({client_id:"564300876279-vduinvjp384lvuusnhtfbgjut1ker4fa.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],scope:"profile https://mail.google.com/",ux_mode:"redirect"}).then(()=>e(gapi)).catch(t=>{console.error(t),e(null)})})}));let o,u=s(r("gapi"),(e,t)=>{if(!e)return t(null);o=e.auth2.getAuthInstance(),o.isSignedIn.listen(e=>{e||o.signIn()}),o.isSignedIn.get()||o.signIn(),o.currentUser.listen(e=>t(e)),t(o.currentUser.get())});u.logout=()=>{o&&o.signOut()},n("user",u),n("is-logged-in",s(r("user"),(e,t)=>{if(e&&e.isSignedIn()){let i=e.getAuthResponse();console.warn(e.getAuthResponse()),n={credentials:i},r=(e,n)=>{if(e||!n.ok)return t(!1),void console.error(e||n.error);t(!0)},fetch("/api/"+"set-credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>r(null,e)).catch(r)}var n,r},!1));var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=function(e){return void 0===e&&(e={}),{arrayFormat:e.arrayFormat||"none",booleanFormat:e.booleanFormat||"none",nullFormat:e.nullFormat||"default"}},d=function(e){return encodeURIComponent(e)},h=function(e){return decodeURIComponent(e)},p=function(e,t,n){return null===t?function(e,t){return"hidden"===t.nullFormat?"":"string"===t.nullFormat?e+"=null":e}(e,n):"boolean"==typeof t?function(e,t,n){return"empty-true"===n.booleanFormat&&t?e:e+"="+("unicode"===n.booleanFormat?t?"✓":"✗":t.toString())}(e,t,n):Array.isArray(t)?function(e,t,n){var r=function(e){return"index"===e.arrayFormat?function(e,t){return e+"["+t+"]"}:"brackets"===e.arrayFormat?function(e){return e+"[]"}:function(e){return e}}(n);return t.map((function(t,n){return r(e,n)+"="+d(t)})).join("&")}(e,t,n):e+"="+d(t)},f=function(e){var t=e.indexOf("?");return-1===t?e:e.slice(t+1)},m=function(e){var t=e.indexOf("["),n=-1!==t;return{hasBrackets:n,name:n?e.slice(0,t):e}},g=function(e,t){var n=c(t);return f(e).split("&").reduce((function(e,t){var r=t.split("="),i=r[0],a=r[1],s=m(i),o=s.hasBrackets,u=s.name,l=e[u],c=function(e,t){if(void 0===e)return"empty-true"===t.booleanFormat||null;if("string"===t.booleanFormat){if("true"===e)return!0;if("false"===e)return!1}if("unicode"===t.booleanFormat){if("✓"===h(e))return!0;if("✗"===h(e))return!1}return"string"===t.nullFormat&&"null"===e?null:h(e)}(a,n);return e[u]=void 0===l?o?[c]:c:(Array.isArray(l)?l:[l]).concat(c),e}),{})},v=function(e,t){var n=c(t);return Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return p(t,e[t],n)})).filter(Boolean).join("&")},y=/[^!$'()*+,;|:]/g,b=function(e){return e.replace(y,(function(e){return encodeURIComponent(e)}))},S={default:b,uri:encodeURI,uriComponent:encodeURIComponent,none:function(e){return e},legacy:encodeURI},w={default:decodeURIComponent,uri:decodeURI,uriComponent:decodeURIComponent,none:function(e){return e},legacy:decodeURIComponent},_=function(e,t,n){var r=S[t]||b;return n?String(e).split("/").map(r).join("/"):r(String(e))},P=function(e){return"("+(e?e.replace(/(^<|>$)/g,""):"[a-zA-Z0-9-_.~%':|=+\\*@$]+")+")"},x=[{name:"url-parameter",pattern:/^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,regex:function(e){return new RegExp(P(e[2]))}},{name:"url-parameter-splat",pattern:/^\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,regex:/([^?]*)/},{name:"url-parameter-matrix",pattern:/^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,regex:function(e){return new RegExp(";"+e[1]+"="+P(e[2]))}},{name:"query-parameter",pattern:/^(?:\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/},{name:"delimiter",pattern:/^(\/|\?)/,regex:function(e){return new RegExp("\\"+e[0])}},{name:"sub-delimiter",pattern:/^(!|&|-|_|\.|;)/,regex:function(e){return new RegExp(e[0])}},{name:"fragment",pattern:/^([0-9a-zA-Z]+)/,regex:function(e){return new RegExp(e[0])}}],E=function(e){return null!=e},N={urlParamsEncoding:"default"},A=function(){function e(e,t){if(!e)throw new Error("Missing path in Path constructor");this.path=e,this.options=l(l({},N),t),this.tokens=function e(t,n){if(void 0===n&&(n=[]),!x.some((function(r){var i=t.match(r.pattern);return!!i&&(n.push({type:r.name,match:i[0],val:i.slice(1,2),otherVal:i.slice(2),regex:r.regex instanceof Function?r.regex(i):r.regex}),i[0].length<t.length&&(n=e(t.substr(i[0].length),n)),!0)})))throw new Error("Could not parse path '"+t+"'");return n}(e),this.hasUrlParams=this.tokens.filter((function(e){return/^url-parameter/.test(e.type)})).length>0,this.hasSpatParam=this.tokens.filter((function(e){return/splat$/.test(e.type)})).length>0,this.hasMatrixParams=this.tokens.filter((function(e){return/matrix$/.test(e.type)})).length>0,this.hasQueryParams=this.tokens.filter((function(e){return/^query-parameter/.test(e.type)})).length>0,this.spatParams=this.getParams("url-parameter-splat"),this.urlParams=this.getParams(/^url-parameter/),this.queryParams=this.getParams("query-parameter"),this.params=this.urlParams.concat(this.queryParams),this.source=this.tokens.filter((function(e){return void 0!==e.regex})).map((function(e){return e.regex.source})).join("")}return e.createPath=function(t,n){return new e(t,n)},e.prototype.isQueryParam=function(e){return-1!==this.queryParams.indexOf(e)},e.prototype.isSpatParam=function(e){return-1!==this.spatParams.indexOf(e)},e.prototype.test=function(e,t){var n=this,r=l(l({caseSensitive:!1,strictTrailingSlash:!1},this.options),t),i=function(e,t){return t||"\\/"===e?e:e.replace(/\\\/$/,"")+"(?:\\/)?"}(this.source,r.strictTrailingSlash),a=this.urlTest(e,i+(this.hasQueryParams?"(\\?.*$|$)":"$"),r.caseSensitive,r.urlParamsEncoding);if(!a||!this.hasQueryParams)return a;var s=g(e,r.queryParams);return 0===Object.keys(s).filter((function(e){return!n.isQueryParam(e)})).length?(Object.keys(s).forEach((function(e){return a[e]=s[e]})),a):null},e.prototype.partialTest=function(e,t){var n=this,r=l(l({caseSensitive:!1,delimited:!0},this.options),t),i=function(e,t){return t?/(\/)$/.test(e)?e:e+"(\\/|\\?|\\.|;|$)":e}(this.source,r.delimited),a=this.urlTest(e,i,r.caseSensitive,r.urlParamsEncoding);if(!a)return a;if(!this.hasQueryParams)return a;var s=g(e,r.queryParams);return Object.keys(s).filter((function(e){return n.isQueryParam(e)})).forEach((function(e){return function(e,t,n){void 0===n&&(n="");var r=e[t];return e[t]=void 0===r?n:Array.isArray(r)?r.concat(n):[r,n],e}(a,e,s[e])})),a},e.prototype.build=function(e,t){var n=this;void 0===e&&(e={});var r=l(l({ignoreConstraints:!1,ignoreSearch:!1,queryParams:{}},this.options),t),i=Object.keys(e).filter((function(e){return!n.isQueryParam(e)})).reduce((function(t,i){if(!E(e[i]))return t;var a=e[i],s=n.isSpatParam(i);return"boolean"==typeof a?t[i]=a:Array.isArray(a)?t[i]=a.map((function(e){return _(e,r.urlParamsEncoding,s)})):t[i]=_(a,r.urlParamsEncoding,s),t}),{});if(this.urlParams.some((function(t){return!E(e[t])}))){var a=this.urlParams.filter((function(t){return!E(e[t])}));throw new Error("Cannot build path: '"+this.path+"' requires missing parameters { "+a.join(", ")+" }")}if(!r.ignoreConstraints&&!this.tokens.filter((function(e){return/^url-parameter/.test(e.type)&&!/-splat$/.test(e.type)})).every((function(e){return new RegExp("^"+P(e.otherVal[0])+"$").test(i[e.val])})))throw new Error("Some parameters of '"+this.path+"' are of invalid format");var s=this.tokens.filter((function(e){return!1===/^query-parameter/.test(e.type)})).map((function(e){return"url-parameter-matrix"===e.type?";"+e.val+"="+i[e.val[0]]:/^url-parameter/.test(e.type)?i[e.val[0]]:e.match})).join("");if(r.ignoreSearch)return s;var o=this.queryParams.filter((function(t){return-1!==Object.keys(e).indexOf(t)})).reduce((function(t,n){return t[n]=e[n],t}),{}),u=v(o,r.queryParams);return u?s+"?"+u:s},e.prototype.getParams=function(e){var t=e instanceof RegExp?function(t){return e.test(t.type)}:function(t){return t.type===e};return this.tokens.filter(t).map((function(e){return e.val[0]}))},e.prototype.urlTest=function(e,t,n,r){var i=this,a=new RegExp("^"+t,n?"":"i"),s=e.match(a);return s?this.urlParams.length?s.slice(1,this.urlParams.length+1).reduce((function(e,t,n){return e[i.urlParams[n]]=(w[r]||decodeURIComponent)(t),e}),{}):{}:null},e}(),O=function(e){var t="";return e.reduce((function(e,n){var r,i,a,s,o=null!=(i=null===(r=n.parser)||void 0===r?void 0:r.urlParams.reduce((function(e,t){return e[t]="url",e}),{}))?i:{},u=null!=(s=null===(a=n.parser)||void 0===a?void 0:a.queryParams.reduce((function(e,t){return e[t]="query",e}),o))?s:{};return void 0!==n.name&&(e[t=t?t+"."+n.name:n.name]=u),e}),{})},C=function e(t,n,r,i,a){void 0===i&&(i={});for(var s=i.queryParamsMode,o=void 0===s?"default":s,u=i.strictTrailingSlash,l=void 0!==u&&u,d=i.strongMatching,h=void 0===d||d,p=i.caseSensitive,v=void 0!==p&&p,y=1===t.length&&""===t[0].name,b=function(t){var s,u=null,d=void 0,p=n;if("/"===a&&"/"===t.path&&(p="/"+n),t.children.length||(u=t.parser.test(p,{caseSensitive:v,strictTrailingSlash:l,queryParams:i.queryParams,urlParamsEncoding:i.urlParamsEncoding})),u||(u=t.parser.partialTest(p,{delimited:h,caseSensitive:v,queryParams:i.queryParams,urlParamsEncoding:i.urlParamsEncoding})),u){var b=t.parser.build(u,{ignoreSearch:!0,urlParamsEncoding:i.urlParamsEncoding});l||t.children.length||(b=b.replace(/\/$/,"")),d=0===p.toLowerCase().indexOf(b.toLowerCase())?p.slice(b.length):p,l||t.children.length||(d=d.replace(/^\/\?/,"?"));var S=function(e,t,n){var r=c(n);if(""===f(e))return{querystring:"",removedParams:{}};var i=e.split("&").reduce((function(e,n){var r=e[0],i=e[1],a=n.split("=")[0],s=m(a).name;return-1===t.indexOf(s)?[r.concat(n),i]:[r,i.concat(n)]}),[[],[]]),a=i[0],s=i[1];return{querystring:a.join("&"),removedParams:g(s.join("&"),r)}}((s=p.replace(b,""),s.split("?")[1]||""),t.parser.queryParams,i.queryParams).querystring;if(d=function(e){return e.split("?")[0]}(d)+(S?"?"+S:""),l||y||"/"!==d||/\/$/.test(b)||(d=""),r.segments.push(t),Object.keys(u).forEach((function(e){return r.params[e]=u[e]})),!y&&!d.length)return{value:r};if(!y&&"strict"!==o&&0===d.indexOf("?")){var w=g(d.slice(1),i.queryParams);return Object.keys(w).forEach((function(e){return r.params[e]=w[e]})),{value:r}}var _=t.getNonAbsoluteChildren();return _.length?{value:e(_,d,r,i,b)}:{value:null}}},S=0,w=t;S<w.length;S++){var _=b(w[S]);if("object"==typeof _)return _.value}return null};var T=function(e){return function(t,n){var r,i,a,s,o,u,l=t.path.replace(/<.*?>/g,"").split("?")[0].replace(/(.+)\/$/,"$1"),c=n.path.replace(/<.*?>/g,"").split("?")[0].replace(/(.+)\/$/,"$1");if("/"===l)return 1;if("/"===c)return-1;if(null===(r=t.parser)||void 0===r?void 0:r.hasSpatParam)return 1;if(null===(i=n.parser)||void 0===i?void 0:i.hasSpatParam)return-1;var d=(l.match(/\//g)||[]).length,h=(c.match(/\//g)||[]).length;if(d<h)return 1;if(d>h)return-1;var p=null!=(s=null===(a=t.parser)||void 0===a?void 0:a.urlParams.length)?s:0,f=null!=(u=null===(o=n.parser)||void 0===o?void 0:o.urlParams.length)?u:0;if(p<f)return-1;if(p>f)return 1;var m=(l.split("/").slice(-1)[0]||"").length,g=(c.split("/").slice(-1)[0]||"").length;return m<g?1:m>g?-1:e.indexOf(t)-e.indexOf(n)}},k=function(){function e(e,t,n,r){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=[]),void 0===r&&(r={}),this.name=e,this.absolute=/^~/.test(t),this.path=this.absolute?t.slice(1):t,this.parser=this.path?new A(this.path):null,this.children=[],this.parent=r.parent,this.checkParents(),this.add(n,r.onAdd,!r.finalSort&&!1!==r.sort),r.finalSort&&this.sortDescendants(),this}return e.prototype.getParentSegments=function(e){return void 0===e&&(e=[]),this.parent&&this.parent.parser?this.parent.getParentSegments(e.concat(this.parent)):e.reverse()},e.prototype.setParent=function(e){this.parent=e,this.checkParents()},e.prototype.setPath=function(e){void 0===e&&(e=""),this.path=e,this.parser=e?new A(e):null},e.prototype.add=function(t,n,r){var i=this;if(void 0===r&&(r=!0),null==t)return this;if(t instanceof Array)return t.forEach((function(e){return i.add(e,n,r)})),this;if(!(t instanceof e||t instanceof Object))throw new Error("RouteNode.add() expects routes to be an Object or an instance of RouteNode.");if(t instanceof e)t.setParent(this),this.addRouteNode(t,r);else{if(!t.name||!t.path)throw new Error("RouteNode.add() expects routes to have a name and a path defined.");var a=new e(t.name,t.path,t.children,{finalSort:!1,onAdd:n,parent:this,sort:r}),s=a.getParentSegments([a]).map((function(e){return e.name})).join(".");n&&n(l(l({},t),{name:s})),this.addRouteNode(a,r)}return this},e.prototype.addNode=function(t,n){return this.add(new e(t,n)),this},e.prototype.getPath=function(e){var t,n=this.getSegmentsByName(e);return n?(t=n)?t.map((function(e){return e.path})).join(""):null:null},e.prototype.getNonAbsoluteChildren=function(){return this.children.filter((function(e){return!e.absolute}))},e.prototype.sortChildren=function(){var e,t;this.children.length&&(e=this.children,t=e.slice(0),e.sort(T(t)))},e.prototype.sortDescendants=function(){this.sortChildren(),this.children.forEach((function(e){return e.sortDescendants()}))},e.prototype.buildPath=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=this.getSegmentsByName(e);if(!r)throw new Error("[route-node][buildPath] '{routeName}' is not defined");return function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});for(var r=n.queryParamsMode,i=void 0===r?"default":r,a=n.trailingSlashMode,s=void 0===a?"default":a,o=[],u=[],l=0,c=e;l<c.length;l++){var d=c[l].parser;d&&(o.push.apply(o,d.queryParams),u.push.apply(u,d.urlParams),u.push.apply(u,d.spatParams))}if("loose"===i){var h=Object.keys(t).reduce((function(e,t){return-1===o.indexOf(t)&&-1===u.indexOf(t)?e.concat(t):e}),[]);o.push.apply(o,h)}var p=o.reduce((function(e,n){return-1!==Object.keys(t).indexOf(n)&&(e[n]=t[n]),e}),{}),f=v(p,n.queryParams),m=e.reduce((function(e,r){var i,a,s=null!=(a=null===(i=r.parser)||void 0===i?void 0:i.build(t,{ignoreSearch:!0,queryParams:n.queryParams,urlParamsEncoding:n.urlParamsEncoding}))?a:"";return r.absolute?s:e+s}),"").replace(/\/\/{1,}/g,"/"),g=m;return"always"===s?g=/\/$/.test(m)?m:m+"/":"never"===s&&"/"!==m&&(g=/\/$/.test(m)?m.slice(0,-1):m),g+(f?"?"+f:"")}(r,t,n)},e.prototype.buildState=function(e,t){void 0===t&&(t={});var n=this.getSegmentsByName(e);return n&&n.length?{name:e,params:t,meta:O(n)}:null},e.prototype.matchPath=function(e,t){void 0===t&&(t={}),""!==e||t.strictTrailingSlash||(e="/");var n=this.getSegmentsMatchingPath(e,t);if(!n)return null;var r=n.segments;if(r[0].absolute){var i=r[0].getParentSegments();r.reverse(),r.push.apply(r,i),r.reverse()}var a=r[r.length-1].findSlashChild();return a&&r.push(a),function(e){return e&&e.segments&&e.segments.length?{name:e.segments.map((function(e){return e.name})).filter((function(e){return e})).join("."),params:e.params,meta:O(e.segments)}:null}(n)},e.prototype.addRouteNode=function(e,t){void 0===t&&(t=!0);var n=e.name.split(".");if(1===n.length){if(-1!==this.children.map((function(e){return e.name})).indexOf(e.name))throw new Error('Alias "'+e.name+'" is already defined in route node');if(-1!==this.children.map((function(e){return e.path})).indexOf(e.path))throw new Error('Path "'+e.path+'" is already defined in route node');this.children.push(e),t&&this.sortChildren()}else{var r=this.getSegmentsByName(n.slice(0,-1).join("."));if(!r)throw new Error("Could not add route named '"+e.name+"', parent is missing.");e.name=n[n.length-1],r[r.length-1].add(e)}return this},e.prototype.checkParents=function(){if(this.absolute&&this.hasParentsParams())throw new Error("[RouteNode] A RouteNode with an abolute path cannot have parents with route parameters")},e.prototype.hasParentsParams=function(){if(this.parent&&this.parent.parser){var e=this.parent.parser;return e.hasUrlParams||e.hasSpatParam||e.hasMatrixParams||e.hasQueryParams||this.parent.hasParentsParams()}return!1},e.prototype.findAbsoluteChildren=function(){return this.children.reduce((function(e,t){return e.concat(t.absolute?t:[]).concat(t.findAbsoluteChildren())}),[])},e.prototype.findSlashChild=function(){return this.getNonAbsoluteChildren().filter((function(e){return e.parser&&/^\/(\?|$)/.test(e.parser.path)}))[0]},e.prototype.getSegmentsByName=function(e){var t=[],n=this.parser?[this]:this.children;return(this.parser?[""]:[]).concat(e.split(".")).every((function(e){var r=function(e,t){var n=t.filter((function(t){return t.name===e}));return n.length?n[0]:void 0}(e,n);return!!r&&(n=r.children,t.push(r),!0)}))?t:null},e.prototype.getSegmentsMatchingPath=function(e,t){var n=(this.parser?[this]:this.children).reduce((function(e,t){return e.concat(t,t.findAbsoluteChildren())}),[]),r=C(n,e,{segments:[],params:{}},t);return r&&1===r.segments.length&&""===r.segments[0].name?null:r},e}();var j=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),R=function(e){return e.split(".").reduce((function(e,t){return e.concat(e.length?e[e.length-1]+"."+t:t)}),[])},U=function(e){return e&&e.meta&&e.meta.params},$=function(e,t){return U(t)&&null!=t.meta.params[e]?Object.keys(t.meta.params[e]).reduce((function(e,n){return e[n]=t.params[n],e}),{}):{}};var q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},L={trailingSlashMode:"default",queryParamsMode:"default",strictTrailingSlash:!1,autoCleanUp:!0,allowNotFound:!1,strongMatching:!0,rewritePathOnMatch:!0,caseSensitive:!1,urlParamsEncoding:"default"};var M="NOT_STARTED",I="NO_START_PATH_OR_STATE",F="ALREADY_STARTED",V="ROUTE_NOT_FOUND",D="SAME_STATES",z="CANNOT_DEACTIVATE",B="CANNOT_ACTIVATE",H="TRANSITION_ERR",W="CANCELLED",Z="@@router5/UNKNOWN_ROUTE",Q="$start",J="$stop",K="$$start",X="$$cancel",G="$$success",Y="$$error";function ee(e){var t=0,n=null;return e.getState=function(){return n},e.setState=function(e){n=e},e.makeState=function(n,r,i,a,s){return{name:n,params:q(q({},e.config.defaultParams[n]),r),path:i,meta:a?q(q({},a),{id:void 0===s?++t:s}):void 0}},e.makeNotFoundState=function(t,n){return e.makeState(Z,{path:t},t,{options:n})},e.areStatesEqual=function(t,n,r){if(void 0===r&&(r=!0),t.name!==n.name)return!1;var i=function(t){return e.rootNode.getSegmentsByName(t).map((function(e){return e.parser.urlParams})).reduce((function(e,t){return e.concat(t)}),[])},a=r?i(t.name):Object.keys(t.params),s=r?i(n.name):Object.keys(n.params);return a.length===s.length&&a.every((function(e){return t.params[e]===n.params[e]}))},e.areStatesDescendants=function(e,t){return!!new RegExp("^"+e.name+"\\.(.*)$").test(t.name)&&Object.keys(e.params).every((function(n){return e.params[n]===t.params[n]}))},e.forwardState=function(t,n){var r=e.config.forwardMap[t]||t;return{name:r,params:q(q(q({},e.config.defaultParams[t]),e.config.defaultParams[r]),n)}},e.buildState=function(t,n){var r=e.forwardState(t,n),i=r.name,a=r.params;return e.rootNode.buildState(i,a)},e}var te={onStart:Q,onStop:J,onTransitionSuccess:G,onTransitionStart:K,onTransitionError:Y,onTransitionCancel:X};function ne(e){var t=[];function n(t){var n=e.executeFactory(t),r=Object.keys(te).map((function(t){if(n[t])return e.addEventListener(te[t],n[t])})).filter(Boolean);return function(){r.forEach((function(e){return e()})),n.teardown&&n.teardown()}}return e.getPlugins=function(){return t},e.usePlugin=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.map((function(e){return t.push(e),n(e)}));return function(){t=t.filter((function(t){return-1===e.indexOf(t)})),i.forEach((function(e){return e()}))}},e}function re(e){var t=[],n=[];return e.useMiddleware=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=r.map((function(r){var i=e.executeFactory(r);return t.push(r),n.push(i),function(){t=t.filter((function(e){return e!==r})),n=n.filter((function(e){return e!==i}))}}));return function(){return a.forEach((function(e){return e()}))}},e.clearMiddleware=function(){return t=[],n=[],e},e.getMiddlewareFactories=function(){return t},e.getMiddlewareFunctions=function(){return n},e}function ie(e){var t={};function n(t){var n="object"==typeof t,r=n?t.next.bind(t):t,i=e.addEventListener(G,(function(e,t){r({route:e,previousRoute:t})}));return n?{unsubscribe:i}:i}function r(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");return n(e)}})[j]=function(){return this},e}return e.invokeEventListeners=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t[e]||[]).forEach((function(e){return e.apply(void 0,n)}))},e.removeEventListener=function(e,n){t[e]=t[e].filter((function(e){return e!==n}))},e.addEventListener=function(n,r){return t[n]=(t[n]||[]).concat(r),function(){return e.removeEventListener(n,r)}},e.subscribe=n,e[j]=r,e["@@observable"]=r,e}function ae(e,t,n){var r=t.isCancelled,i=t.toState,a=t.fromState,s=t.errorKey,o=void 0===s?void 0:s,u=Array.isArray(e)?e:Object.keys(e),l=function(e){return"object"==typeof e&&void 0!==e.name&&void 0!==e.params&&void 0!==e.path},c=function(e,t,n,i){var s=function(e,t){e?i(e):t&&t!==n&&l(t)?(function(e,t){return t.name!==e.name||t.params!==e.params||t.path!==e.path}(t,n)&&console.error("[router5][transition] Warning: state values (name, params, path) were changed during transition process."),i(null,function(e,t){return q(q(q({},t),e),{meta:q(q({},t.meta),e.meta)})}(t,n))):i(null,n)},o=e.call(null,n,a,s);r()?s(null):"boolean"==typeof o?s(o?null:t):l(o)?s(null,o):o&&"function"==typeof o.then&&o.then((function(e){e instanceof Error?s({error:e},null):s(null,e)}),(function(e){e instanceof Error?(console.error(e.stack||e),s(q(q({},t),{promiseError:e}),null)):s("object"==typeof e?q(q({},t),e):t,null)}))},d=function(t,i){var a;if(r())n();else if(t)n(t);else if(u.length){var s="string"==typeof u[0],l=o&&s?((a={})[o]=u[0],a):{},h=s?e[u[0]]:u[0];u=u.slice(1),c(h,l,i,d)}else n(null,i)};d(null,i)}function se(e,t,n,r,i){var a=!1,s=!1,o=e.getOptions(),u=e.getLifecycleFunctions(),l=u[0],c=u[1],d=e.getMiddlewareFunctions(),h=function(){return a},p=function(e,t){return q(q({},e),t instanceof Object?t:{error:t})},f=t.name===Z,m={isCancelled:h,toState:t,fromState:n},g=function(e,t){var n,r=e.meta&&e.meta&&e.meta.options||{},i=t?R(t.name):[],a=R(e.name),s=Math.min(i.length,a.length);n=!t||r.reload?0:U(t)||U(e)?function(){var n,r=function(){var r=i[n],s=a[n];if(r!==s)return{value:n};var o=$(r,e),u=$(s,t);return Object.keys(o).length!==Object.keys(u).length?{value:n}:0===Object.keys(o).length?"continue":Object.keys(o).some((function(e){return u[e]!==o[e]}))?{value:n}:void 0};for(n=0;n<s;n+=1){var o=r();if("object"==typeof o)return o.value}return n}():0;var o=i.slice(n).reverse(),u=a.slice(n);return{intersection:t&&n>0?i[n-1]:"",toDeactivate:o,toActivate:u}}(t,n),v=g.toDeactivate,y=g.toActivate,b=!n||r.forceDeactivate?[]:function(e,t,n){ae(v.filter((function(e){return l[e]})).reduce((function(e,t){var n;return q(q({},e),((n={})[t]=l[t],n))}),{}),q(q({},m),{errorKey:"segment"}),(function(e){return n(e?p({code:z},e):null)}))},S=f?[]:function(e,t,n){ae(y.filter((function(e){return c[e]})).reduce((function(e,t){var n;return q(q({},e),((n={})[t]=c[t],n))}),{}),q(q({},m),{errorKey:"segment"}),(function(e){return n(e?p({code:B},e):null)}))},w=d.length?function(e,t,n){return ae(d,q({},m),(function(t,r){return n(t?p({code:H},t):null,r||e)}))}:[];return ae([].concat(b).concat(S).concat(w),m,(function(n,r){if(s=!0,!h()){if(!n&&o.autoCleanUp){var a=R(t.name);Object.keys(l).forEach((function(t){-1===a.indexOf(t)&&e.clearCanDeactivate(t)}))}i(n,r||t)}})),function(){a||s||(a=!0,i({code:W},null))}}var oe=function(){};function ue(e){var t;function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[0],a=t[t.length-1],s="function"==typeof a?a:oe,o="object"==typeof t[1]?t[1]:{},u="object"==typeof t[2]?t[2]:{};if(e.isStarted()){var l=e.buildState(i,o);if(!l)return s(c={code:V}),void e.invokeEventListeners(Y,null,e.getState(),c);var c,d=e.makeState(l.name,l.params,e.buildPath(l.name,l.params),{params:l.meta,options:u}),h=!!e.getState()&&e.areStatesEqual(e.getState(),d,!1);if(h&&!u.reload&&!u.force)return s(c={code:D}),void e.invokeEventListeners(Y,d,e.getState(),c);var p=e.getState();return u.skipTransition?(s(null,d),oe):e.transitionToState(d,p,u,(function(t,r){if(t)if(t.redirect){var i=t.redirect;n(i.name,i.params,q(q({},u),{force:!0,redirected:!0}),s)}else s(t);else e.invokeEventListeners(G,r,p,u),s(null,r)}))}s({code:M})}return e.navigate=n,e.navigate=n,e.navigateToDefault=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i="object"==typeof t[0]?t[0]:{},a=2===t.length?t[1]:"function"==typeof t[0]?t[0]:oe,s=e.getOptions();return s.defaultRoute?n(s.defaultRoute,s.defaultParams,i,a):function(){}},e.cancel=function(){return t&&(t("navigate"),t=null),e},e.transitionToState=function(n,r,i,a){return void 0===i&&(i={}),void 0===a&&(a=oe),e.cancel(),e.invokeEventListeners(K,n,r),t=se(e,n,r,i,(function(i,s){t=null,s=s||n,i?(i.code===W?e.invokeEventListeners(X,n,r):e.invokeEventListeners(Y,n,r,i),a(i)):(e.setState(s),a(null,s))}))},e}var le=function(){};function ce(e){var t=!1;return e.isStarted=function(){return t},e.start=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,a,s=e.getOptions(),o=n[n.length-1],u="function"==typeof o?o:le,l="function"!=typeof n[0]?n[0]:void 0;if(t)return u({code:F}),e;t=!0,e.invokeEventListeners(Q);var c=function(t,n,r){void 0===r&&(r=!0),t||e.invokeEventListeners(G,n,null,{replace:!0}),t&&r&&e.invokeEventListeners(Y,n,null,t),u(t,n)};if(void 0===l&&!s.defaultRoute)return c({code:I});if("string"==typeof l?i=l:"object"==typeof l&&(a=l),a)e.setState(a),c(null,a);else{a=void 0===i?null:e.matchPath(i);var d=function(){return e.navigateToDefault({replace:!0},u)},h=function(t){return e.navigate(t.name,t.params,{replace:!0,reload:!0,redirected:!0},u)},p=function(t){e.transitionToState(t,e.getState(),{},(function(e,t){e?e.redirect?h(e.redirect):s.defaultRoute?d():c(e,null,!1):c(null,t)}))};a?p(a):s.defaultRoute?d():s.allowNotFound?p(e.makeNotFoundState(i,{replace:!0})):c({code:V,path:i},null)}return e},e.stop=function(){return t&&(e.setState(null),t=!1,e.invokeEventListeners(J)),e},e}var de=function(e){return"function"==typeof e?e:function(){return function(){return e}}};function he(e){var t={},n={},r={},i={};return e.getLifecycleFactories=function(){return[t,n]},e.getLifecycleFunctions=function(){return[r,i]},e.canDeactivate=function(n,i){var a=de(i);return t[n]=a,r[n]=e.executeFactory(a),e},e.clearCanDeactivate=function(n){return t[n]=void 0,r[n]=void 0,e},e.canActivate=function(t,r){var a=de(r);return n[t]=a,i[t]=e.executeFactory(a),e},e}var pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function fe(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var me=function(e){return function(){return e}},ge=function(){},ve="undefined"!=typeof window&&window.history,ye=function(e){try{return encodeURI(decodeURI(e))}catch(t){return e}},be=ve?{getBase:function(){return window.location.pathname},pushState:function(e,t,n){return window.history.pushState(e,t,n)},replaceState:function(e,t,n){return window.history.replaceState(e,t,n)},addPopstateListener:function(e,t){var n=t.useHash&&!(-1===window.navigator.userAgent.indexOf("Trident"));return window.addEventListener("popstate",e),n&&window.addEventListener("hashchange",e),function(){window.removeEventListener("popstate",e),n&&window.removeEventListener("hashchange",e)}},getLocation:function(e){var t=e.useHash?window.location.hash.replace(new RegExp("^#"+e.hashPrefix),""):window.location.pathname.replace(new RegExp("^"+e.base),"");return(ye(t)||"/")+window.location.search},getState:function(){return window.history.state},getHash:function(){return window.location.hash}}:{getBase:me(""),pushState:ge,replaceState:ge,addPopstateListener:ge,getLocation:me(""),getState:me(null),getHash:me("")},Se={forceDeactivate:!0,useHash:!1,hashPrefix:"",base:"",mergeState:!1,preserveHash:!0};let we=function(e,t,n){void 0===e&&(e=[]),void 0===t&&(t={}),void 0===n&&(n={});return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce((function(e,t){return t(e)}),t)}}(function(e){return function(t){var n=q(q({},L),e);return t.getOptions=function(){return n},t.setOption=function(e,r){return n[e]=r,t},t}}(t),function(e){return function(t){var n=e;return t.setDependency=function(e,r){return n[e]=r,t},t.setDependencies=function(e){return Object.keys(e).forEach((function(n){return t.setDependency(n,e[n])})),t},t.getDependencies=function(){return n},t.getInjectables=function(){return[t,t.getDependencies()]},t.executeFactory=function(e){return e.apply(void 0,t.getInjectables())},t}}(n),ie,ee,ce,he,ue,ne,re,function(e){return function(t){t.forward=function(e,n){return t.config.forwardMap[e]=n,t};var n=e instanceof k?e:new k("","",e,{onAdd:r});function r(e){e.canActivate&&t.canActivate(e.name,e.canActivate),e.forwardTo&&t.forward(e.name,e.forwardTo),e.decodeParams&&(t.config.decoders[e.name]=e.decodeParams),e.encodeParams&&(t.config.encoders[e.name]=e.encodeParams),e.defaultParams&&(t.config.defaultParams[e.name]=e.defaultParams)}return t.rootNode=n,t.add=function(e,i){return n.add(e,r,!i),i&&n.sortDescendants(),t},t.addNode=function(e,r,i){return n.addNode(e,r),i&&t.canActivate(e,i),t},t.isActive=function(e,n,r,i){void 0===n&&(n={}),void 0===r&&(r=!1),void 0===i&&(i=!0);var a=t.getState();return!!a&&(r||a.name===e?t.areStatesEqual(t.makeState(e,n),a,i):t.areStatesDescendants(t.makeState(e,n),a))},t.buildPath=function(e,n){if(e===Z)return n.path;var r=q(q({},t.config.defaultParams[e]),n),i=t.getOptions(),a=i.trailingSlashMode,s=i.queryParamsMode,o=i.queryParams,u=t.config.encoders[e]?t.config.encoders[e](r):r;return t.rootNode.buildPath(e,u,{trailingSlashMode:a,queryParamsMode:s,queryParams:o,urlParamsEncoding:t.getOptions().urlParamsEncoding})},t.matchPath=function(e,n){var r=t.getOptions(),i=t.rootNode.matchPath(e,r);if(i){var a=i.name,s=i.params,o=i.meta,u=t.config.decoders[a]?t.config.decoders[a](s):s,l=t.forwardState(a,u),c=l.name,d=l.params,h=!1===r.rewritePathOnMatch?e:t.buildPath(c,d);return t.makeState(c,d,h,{params:o,source:n})}return null},t.setRootPath=function(e){t.rootNode.setPath(e)},t}}(e))({config:{decoders:{},encoders:{},defaultParams:{},forwardMap:{}}})}([{name:"home",path:"/",forwardTo:"mailbox"},{name:"mailbox",path:"/mbx/:id",defaultParams:{id:"INBOX"}}]);we.usePlugin(function(e,t){void 0===t&&(t=be);var n,r=pe(pe({},Se),e),i={forceDeactivate:r.forceDeactivate,source:"popstate"};return function(e){var a=e.getOptions(),s=e.start;e.buildUrl=function(t,n){return(r.base||"")+(r.useHash?"#"+r.hashPrefix:"")+e.buildPath(t,n)};function o(e,n,i){var a=e?{meta:e.meta,name:e.name,params:e.params,path:e.path}:e,s=!0===r.mergeState?pe(pe({},t.getState()),a):a;i?t.replaceState(s,"",n):t.pushState(s,"",n)}function u(n){var s=e.getState(),u=!n.state||!n.state.name,l=u?e.matchPath(t.getLocation(r),"popstate"):e.makeState(n.state.name,n.state.params,n.state.path,pe(pe({},n.state.meta),{source:"popstate"}),n.state.meta.id),c=a.defaultRoute,d=a.defaultParams;l?s&&e.areStatesEqual(l,s,!1)||e.transitionToState(l,s,i,(function(t,n){if(t)if(t.redirect){var r=t.redirect,a=r.name,h=r.params;e.navigate(a,h,pe(pe({},i),{replace:!0,force:!0,redirected:!0}))}else if(t.code===z){var p=e.buildUrl(s.name,s.params);u||o(l,p,!0)}else c&&e.navigate(c,d,pe(pe({},i),{reload:!0,replace:!0}));else e.invokeEventListeners(G,n,s,{replace:!0})})):c&&e.navigateToDefault(pe(pe({},i),{reload:!0,replace:!0}))}function l(){n&&(n(),n=void 0)}return e.matchUrl=function(t){return e.matchPath(function(e){var t=e.match(/^(?:http|https):\/\/(?:[0-9a-z_\-.:]+?)(?=\/)(.*)$/),n=(t?t[1]:e).match(/^(.+?)(#.+?)?(\?.+)?$/);if(!n)throw new Error("[router5] Could not parse url "+e);var i=n[1],a=n[2]||"",s=n[3]||"";return(r.useHash?a.replace(new RegExp("^#"+r.hashPrefix),""):r.base?i.replace(new RegExp("^"+r.base),""):i)+s}(t))},e.start=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return 0===n.length||"function"==typeof n[0]?s.apply(void 0,fe([t.getLocation(r)],n)):s.apply(void 0,n),e},e.replaceHistoryState=function(n,r,i){void 0===r&&(r={}),void 0===i&&(i="");var a=e.buildState(n,r),s=e.makeState(a.name,a.params,e.buildPath(a.name,a.params),{params:a.meta}),o=e.buildUrl(n,r);e.lastKnownState=s,t.replaceState(s,i,o)},{onStart:function(){r.useHash&&!r.base&&(r.base=t.getBase()),n=t.addPopstateListener(u,r)},onStop:l,teardown:l,onTransitionSuccess:function(n,i,a){var s=t.getState(),u=s&&s.meta&&s.name&&s.params,l=i&&e.areStatesEqual(i,n,!1),c=a.replace||!u||l,d=e.buildUrl(n.name,n.params);null===i&&!1===r.useHash&&!0===r.preserveHash&&(d+=t.getHash()),o(n,d,c)},onPopState:u}}}({useHash:!0})),we.start();let _e=i(we.getState(),e=>(we.subscribe(e=>{console.log("router change",e)}),()=>we.unsubscribe()));function Pe(e,t){return n=>{console.error(n),e(t)}}_e.go=e=>{we.navigate(e)},n("router",_e),n("gmail-labels",s([r("gapi"),r("is-logged-in")],([e,t],n)=>{if(!e||!t)return n([]);e.client.gmail.users.labels.list({userId:"me"}).then(t=>{let{labels:r}=t.result,i=e.client.newBatch();r.filter(e=>"labelHide"!==e.labelListVisibility&&"UNREAD"!==e.id).forEach(({id:t})=>{i.add(e.client.request({path:"/gmail/v1/users/me/labels/"+t}),{id:t})}),i.then(e=>{e=Object.values(e.result).map(({result:e})=>e).sort((e,t)=>"system"===e.type&&"system"!==t.type?-1:"system"!==e.type&&"system"===t.type?1:"system"===e.type&&"INBOX"===e.id?-1:"system"===t.type&&"INBOX"===t.id?1:e.name.localeCompare(t.name)).map(e=>"system"!==e.type?e:{...e,name:e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase()}),n(e||[])}).catch(Pe(n,[]))}).catch(Pe(n,[]))},[])),n("gmail-messages",s([r("gapi"),r("is-logged-in"),r("router")],([e,t,n],r)=>{if(!e||!t||!n||"mailbox"!==n.name)return r([]);e.client.gmail.users.messages.list({userId:"me",maxResults:5e3,labelIds:[n.params.id]}).then(t=>{let{messages:n}=t.result,r=e.client.newBatch();console.log("messages",n),n.forEach(({id:t})=>{r.add(e.client.request({path:"/gmail/v1/users/me/messages/"+t}),{id:t})})}).catch(Pe(r,[]))},[]));const xe="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,Ee=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}},Ne=`{{lit-${String(Math.random()).slice(2)}}}`,Ae=`\x3c!--${Ne}--\x3e`,Oe=new RegExp(`${Ne}|${Ae}`);class Ce{constructor(e,t){this.parts=[],this.element=t;const n=[],r=[],i=document.createTreeWalker(t.content,133,null,!1);let a=0,s=-1,o=0;const{strings:u,values:{length:l}}=e;for(;o<l;){const e=i.nextNode();if(null!==e){if(s++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let r=0;for(let e=0;e<n;e++)Te(t[e].name,"$lit$")&&r++;for(;r-- >0;){const t=u[o],n=Re.exec(t)[2],r=n.toLowerCase()+"$lit$",i=e.getAttribute(r);e.removeAttribute(r);const a=i.split(Oe);this.parts.push({type:"attribute",index:s,name:n,strings:a}),o+=a.length-1}}"TEMPLATE"===e.tagName&&(r.push(e),i.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(Ne)>=0){const r=e.parentNode,i=t.split(Oe),a=i.length-1;for(let t=0;t<a;t++){let n,a=i[t];if(""===a)n=je();else{const e=Re.exec(a);null!==e&&Te(e[2],"$lit$")&&(a=a.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),n=document.createTextNode(a)}r.insertBefore(n,e),this.parts.push({type:"node",index:++s})}""===i[a]?(r.insertBefore(je(),e),n.push(e)):e.data=i[a],o+=a}}else if(8===e.nodeType)if(e.data===Ne){const t=e.parentNode;null!==e.previousSibling&&s!==a||(s++,t.insertBefore(je(),e)),a=s,this.parts.push({type:"node",index:s}),null===e.nextSibling?e.data="":(n.push(e),s--),o++}else{let t=-1;for(;-1!==(t=e.data.indexOf(Ne,t+1));)this.parts.push({type:"node",index:-1}),o++}}else i.currentNode=r.pop()}for(const e of n)e.parentNode.removeChild(e)}}const Te=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},ke=e=>-1!==e.index,je=()=>document.createComment(""),Re=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Ue(e,t){const{element:{content:n},parts:r}=e,i=document.createTreeWalker(n,133,null,!1);let a=qe(r),s=r[a],o=-1,u=0;const l=[];let c=null;for(;i.nextNode();){o++;const e=i.currentNode;for(e.previousSibling===c&&(c=null),t.has(e)&&(l.push(e),null===c&&(c=e)),null!==c&&u++;void 0!==s&&s.index===o;)s.index=null!==c?-1:s.index-u,a=qe(r,a),s=r[a]}l.forEach(e=>e.parentNode.removeChild(e))}const $e=e=>{let t=11===e.nodeType?0:1;const n=document.createTreeWalker(e,133,null,!1);for(;n.nextNode();)t++;return t},qe=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if(ke(t))return n}return-1};const Le=new WeakMap,Me=e=>"function"==typeof e&&Le.has(e),Ie={},Fe={};class Ve{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=xe?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],n=this.template.parts,r=document.createTreeWalker(e,133,null,!1);let i,a=0,s=0,o=r.nextNode();for(;a<n.length;)if(i=n[a],ke(i)){for(;s<i.index;)s++,"TEMPLATE"===o.nodeName&&(t.push(o),r.currentNode=o.content),null===(o=r.nextNode())&&(r.currentNode=t.pop(),o=r.nextNode());if("node"===i.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(o.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(o,i.name,i.strings,this.options));a++}else this.__parts.push(void 0),a++;return xe&&(document.adoptNode(e),customElements.upgrade(e)),e}}const De=` ${Ne} `;class ze{constructor(e,t,n,r){this.strings=e,this.values=t,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let r=0;r<e;r++){const e=this.strings[r],i=e.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===e.indexOf("--\x3e",i+1);const a=Re.exec(e);t+=null===a?e+(n?De:Ae):e.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+Ne}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const Be=e=>null===e||!("object"==typeof e||"function"==typeof e),He=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class We{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new Ze(this)}_getValue(){const e=this.strings,t=e.length-1;let n="";for(let r=0;r<t;r++){n+=e[r];const t=this.parts[r];if(void 0!==t){const e=t.value;if(Be(e)||!He(e))n+="string"==typeof e?e:String(e);else for(const t of e)n+="string"==typeof t?t:String(t)}}return n+=e[t],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Ze{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===Ie||Be(e)&&e===this.value||(this.value=e,Me(e)||(this.committer.dirty=!0))}commit(){for(;Me(this.value);){const e=this.value;this.value=Ie,e(this)}this.value!==Ie&&this.committer.commit()}}class Qe{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(je()),this.endNode=e.appendChild(je())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=je()),e.__insert(this.endNode=je())}insertAfterPart(e){e.__insert(this.startNode=je()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;Me(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Ie,e(this)}const e=this.__pendingValue;e!==Ie&&(Be(e)?e!==this.value&&this.__commitText(e):e instanceof ze?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):He(e)?this.__commitIterable(e):e===Fe?(this.value=Fe,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof Ve&&this.value.template===t)this.value.update(e.values);else{const n=new Ve(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,r=0;for(const i of e)n=t[r],void 0===n&&(n=new Qe(this.options),t.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(t[r-1])),n.setValue(i),n.commit(),r++;r<t.length&&(t.length=r,this.clear(n&&n.endNode))}clear(e=this.startNode){Ee(this.startNode.parentNode,e.nextSibling,this.endNode)}}class Je{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;Me(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Ie,e(this)}if(this.__pendingValue===Ie)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=Ie}}class Ke extends We{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new Xe(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Xe extends Ze{}let Ge=!1;(()=>{try{const e={get capture(){return Ge=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class Ye{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;Me(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Ie,e(this)}if(this.__pendingValue===Ie)return;const e=this.__pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),r=null!=e&&(null==t||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=et(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=Ie}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const et=e=>e&&(Ge?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);function tt(e){let t=nt.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},nt.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const r=e.strings.join(Ne);return n=t.keyString.get(r),void 0===n&&(n=new Ce(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}const nt=new Map,rt=new WeakMap;const it=new class{handleAttributeExpressions(e,t,n,r){const i=t[0];if("."===i){return new Ke(e,t.slice(1),n).parts}if("@"===i)return[new Ye(e,t.slice(1),r.eventContext)];if("?"===i)return[new Je(e,t.slice(1),n)];return new We(e,t,n).parts}handleTextExpression(e){return new Qe(e)}};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const at=(e,...t)=>new ze(e,t,"html",it),st=(e,t)=>`${e}--${t}`;let ot=!0;void 0===window.ShadyCSS?ot=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),ot=!1);const ut=e=>t=>{const n=st(t.type,e);let r=nt.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},nt.set(n,r));let i=r.stringsArray.get(t.strings);if(void 0!==i)return i;const a=t.strings.join(Ne);if(i=r.keyString.get(a),void 0===i){const n=t.getTemplateElement();ot&&window.ShadyCSS.prepareTemplateDom(n,e),i=new Ce(t,n),r.keyString.set(a,i)}return r.stringsArray.set(t.strings,i),i},lt=["html","svg"],ct=new Set,dt=(e,t,n)=>{ct.add(e);const r=n?n.element:document.createElement("template"),i=t.querySelectorAll("style"),{length:a}=i;if(0===a)return void window.ShadyCSS.prepareTemplateStyles(r,e);const s=document.createElement("style");for(let e=0;e<a;e++){const t=i[e];t.parentNode.removeChild(t),s.textContent+=t.textContent}(e=>{lt.forEach(t=>{const n=nt.get(st(t,e));void 0!==n&&n.keyString.forEach(e=>{const{element:{content:t}}=e,n=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{n.add(e)}),Ue(e,n)})})})(e);const o=r.content;n?function(e,t,n=null){const{element:{content:r},parts:i}=e;if(null==n)return void r.appendChild(t);const a=document.createTreeWalker(r,133,null,!1);let s=qe(i),o=0,u=-1;for(;a.nextNode();){u++;for(a.currentNode===n&&(o=$e(t),n.parentNode.insertBefore(t,n));-1!==s&&i[s].index===u;){if(o>0){for(;-1!==s;)i[s].index+=o,s=qe(i,s);return}s=qe(i,s)}}}(n,s,o.firstChild):o.insertBefore(s,o.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);const u=o.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==u)t.insertBefore(u.cloneNode(!0),t.firstChild);else if(n){o.insertBefore(s,o.firstChild);const e=new Set;e.add(s),Ue(n,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const ht={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},pt=(e,t)=>t!==e&&(t==t||e==e),ft={attribute:!0,type:String,converter:ht,reflect:!1,hasChanged:pt};class mt extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,n)=>{const r=this._attributeNameForProperty(n,t);void 0!==r&&(this._attributeToPropertyMap.set(r,n),e.push(r))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=ft){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this._requestUpdate(e,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||ft}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const n of t)this.createProperty(n,e[n])}}static _attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=pt){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t.type,r=t.converter||ht,i="function"==typeof r?r:r.fromAttribute;return i?i(e,n):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const n=t.type,r=t.converter;return(r&&r.toAttribute||ht.toAttribute)(e,n)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=ft){const r=this.constructor,i=r._attributeNameForProperty(e,n);if(void 0!==i){const e=r._propertyValueToAttribute(t,n);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(i):this.setAttribute(i,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){const e=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}_requestUpdate(e,t){let n=!0;if(void 0!==e){const r=this.constructor,i=r.getPropertyOptions(e);r._valueHasChanged(this[e],t,i.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==i.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,i))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this._requestUpdate(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}mt.finalized=!0;const gt="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,vt=Symbol();class yt{constructor(e,t){if(t!==vt)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(gt?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const bt=(e,...t)=>{const n=t.reduce((t,n,r)=>t+(e=>{if(e instanceof yt)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(n)+e[r+1],e[0]);return new yt(n,vt)};(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const St={};class wt extends mt{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(void 0===e)this._styles=[];else if(Array.isArray(e)){const t=(e,n)=>e.reduceRight((e,n)=>Array.isArray(n)?t(n,e):(e.add(n),e),n),n=t(e,new Set),r=[];n.forEach(e=>r.unshift(e)),this._styles=r}else this._styles=[e]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?gt?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==St&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return St}}wt.finalized=!0,wt.render=(e,t,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const r=n.scopeName,i=rt.has(t),a=ot&&11===t.nodeType&&!!t.host,s=a&&!ct.has(r),o=s?document.createDocumentFragment():t;if(((e,t,n)=>{let r=rt.get(t);void 0===r&&(Ee(t,t.firstChild),rt.set(t,r=new Qe(Object.assign({templateFactory:tt},n))),r.appendInto(t)),r.setValue(e),r.commit()})(e,o,Object.assign({templateFactory:ut(r)},n)),s){const e=rt.get(o);rt.delete(o);const n=e.value instanceof Ve?e.value.template:void 0;dt(r,o,n),Ee(t,t.firstChild),t.appendChild(o),rt.set(t,e)}!i&&a&&window.ShadyCSS.styleElement(t.host)};customElements.define("rb-usable",class extends wt{static get properties(){return{loggedIn:{atttribute:!1}}}initialize(){super.initialize(),this.loggedInStore=r("is-logged-in"),this.loggedInStore.subscribe(e=>this.loggedIn=e)}static get styles(){return bt`
      :host {
        display: grid;
        grid-template:
          "bar bar" 40px
          "mbx mlist" 1fr
          "mbx msg" 2fr / 250px 1fr
        ;
        height: 100vh;
      }
      .loading {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--highlight);
        background: #333;
        font-family: karnak-cond-normal-700;
        font-size: 1.5rem;
      }
      .loading img {
        margin-right: 5px;
      }
    `}render(){return this.loggedIn?at`
      <usbl-top-bar></usbl-top-bar>
      <usbl-mailboxes></usbl-mailboxes>
      <usbl-messages></usbl-messages>
      <usbl-message-view></usbl-message-view>
    `:at`
        <div class="loading">
          <img src="/img/bird.svg" width="36" height="36" alt="Usable Gmail Logo">
          <span>Loading…</span>
        </div>`}});customElements.define("usbl-top-bar",class extends wt{static get properties(){return{picture:{atttribute:!1},givenName:{atttribute:!1}}}initialize(){super.initialize(),this.userStore=r("user"),this.userStore.subscribe(e=>{let t,n;if(e){let r=e.getBasicProfile();r&&(t=r.getImageUrl(),n=r.getGivenName())}this.picture=t,this.givenName=n})}static get styles(){return bt`
      :host {
        grid-area: bar;
        display: flex;
        justify-content: space-between;
        padding: 2px;
        border-bottom: 1px solid #e2e2e2;
      }
      .logo-name {
        display: flex;
      }
      .logo-name > img {
        margin: 5px 0 5px 5px;
        height: 30px;
      }
      .logo-name > .name {
        border-left: 1px solid hotpink;
        line-height: 0.6;
        display: inline-block;
        padding: 6px 3px 3px 3px;
        font-family: karnak-normal-700, karnak-cond-normal-700;
        color: var(--highlight);
        font-size: 1.5rem;
        height: 16px;
        margin-top: 7px;
      }
      .user-bar > img {
        vertical-align: middle;
      }
    `}render(){return at`
      <span class="logo-name">
        <img src="/img/bird.svg" width="36" height="36" alt="Usable Gmail Logo">
        <span class="name">Usable</span>
      </span>
      ${this.picture&&this.givenName?at`
            <span class="user-bar">
              <usbl-logout-button></usbl-logout-button>
              <img src=${this.picture} width="36" height="36" alt=${this.givenName}>
            </span>
          `:at``}
    `}});customElements.define("usbl-mailboxes",class extends wt{static get properties(){return{labels:{atttribute:!1}}}initialize(){super.initialize(),this.labelsStore=r("gmail-labels"),this.labelsStore.subscribe(e=>this.labels=e)}static get styles(){return bt`
      :host {
        grid-area: mbx;
        overflow: auto;
        font-family: franklin;
        border-right: 1px solid #e2e2e2;
      }
      a {
        text-decoration: none;
        color: #333;
        display: flex;
        justify-content: space-between;
        align-items: baseline;
      }
      .unread {
        font-weight: bold;
      }
      .icon {
        display: inline-block;
        margin-right: 0.2rem;
      }
      ul {
        list-style-type: none;
        padding-left: 0;
      }
      li {
        padding: 0.2rem 0.8rem;
      }
    `}render(){return at`
      <ul>
        ${this.labels.map(({id:e,name:t,messagesUnread:n})=>{return at`
          <li>
            <a href=${"#"+e} class=${n?"unread":"read"}>
              <span class="label">${function(e){return at`<span class="icon">${_t[e]||"📁"}</span>`}(e)} ${t}</span>
              ${n?at`<span class="count">${r=n,"number"!=typeof r||r<1e3?r:r>999999?"∞":Math.floor(r/1e3)+"k"}</span>`:""}
            </a>
          </li>
        `;var r})}
      </ul>
    `}});let _t={INBOX:"📥",DRAFT:"📝",SENT:"📤",SPAM:"🥫",TRASH:"🗑"};customElements.define("usbl-messages",class extends wt{static get properties(){return{messages:{atttribute:!1}}}initialize(){super.initialize(),this.messagesStore=r("gmail-messages"),this.messagesStore.subscribe(e=>this.messages=e)}static get styles(){return bt`
      :host {
        grid-area: mlist;
        border-bottom: 1px solid #e2e2e2;
        overflow: auto;
      }
    `}render(){return at`
      <pre>${JSON.stringify(this.messages,null,2)}</pre>
    `}});customElements.define("usbl-message-view",class extends wt{static get styles(){return bt`
      :host {
        background: lime;
        opacity: 0.2;
        grid-area: msg;
      }
    `}render(){return at`
      <span>message view</span>
    `}});customElements.define("usbl-logout-button",class extends wt{initialize(){super.initialize(),this.userStore=r("user")}static get styles(){return bt`
    `}handleLogOut(){console.warn("logging out",this,this.userStore),this.userStore&&this.userStore.logout()}render(){return at`
      <button type="button" class="logout" @click=${this.handleLogOut}>Log Out</button>
    `}})}();
//# sourceMappingURL=usable-gmail.min.js.map
